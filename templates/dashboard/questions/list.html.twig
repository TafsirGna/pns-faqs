{% extends 'dashboard/base.html.twig' %}

{% block title %}Dashboard{% endblock %}

{% block tabContentArea %}

    <div class = "clearfix w-100 py-2">
        <h5 class = "float-left">
            <a class="btn btn-light small btn-sm mr-2" title="Go back" href="{{path('dashboard_index')}}">
                <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
            </a>
            Liste des questions du Faq (<em>{{faq.name}}</em>)
        </h5>
        <a class="btn btn-light btn-sm float-right small" type="button" href="{{path('dashboard_faq_new_question', {'id': faq.id})}}">
            <span class = "text-success font-italic">New</span>
        </a>
    </div>

    {% if questions|length == 0 %}
        <div class="alert alert-primary small font-italic" role="alert">
            No recorded questions 
        </div>
    {% else %}
        <table class="table table-striped">
            <thead>
                <tr>
                <th scope="col">#</th>
                <th scope="col">Question</th>
                <th scope="col">Answer</th>
                {# <th scope="col">Platform</th> #}
                <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                {% for question in questions %}
                    <tr>
                        <th scope="row">{{loop.index}}</th>
                        <td>{{question.content}}</td>
                        {% if question.answer is null %}
                            <td class = "font-italic">(null)</td>
                        {% else %}
                            <td class = "font-italic">{{question.answer.content}}</td>
                        {% endif %}
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-outline-secondary btn-sm dropdown-toggle float-right small" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Actions
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a class="dropdown-item font-italic small" href="{{path('dashboard_faq_question_edition', {'id': question.id})}}">Edit</a>
                                    {% if question.answer is null %}
                                        <a class="dropdown-item font-italic small" href="{{path('dashboard_faq_question_new_answer', {id: question.id})}}">Add Answer</a>
                                    {% else %}
                                        <a class="dropdown-item font-italic small" href="{{path('dashboard_faq_question_answer_edition', {id: question.answer.id})}}">Edit Answer</a>
                                    {% endif %}
                                    <a class="dropdown-item text-danger font-italic small" href="{{path('dashboard_faq_question_deletion', {'id': question.id})}}">Delete</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
{% endblock %}